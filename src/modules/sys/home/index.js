
import React, { useState, useEffect, } from "react"

// import warning from 'tiny-warning';


import './index.less'
// eslint-disable-next-line 
import { Affix, Button, Input } from 'antd'


const tasks = []
function setLong(value) {
    tasks.forEach(setValue => {
        setValue(value)
    })
}

function useRgLong(x) {

    let [value, setValue] = useState(0)
    useEffect(() => {
        tasks.push(setValue)
    }, [])
    return [value, setLong]
}

const routeHandler = {}


export default function Home(prop) {
    console.log("home ")
    const [test, setTest] = useState(1)
    const [count, setCount] = useState(1);

    useEffect(() => {

    }, []);

    useEffect(() => {
        prop.routeCb({
            beforeHook({ location }, next) {
                setTest(test => {
                    console.log(test)
                    return test
                })
                next()
            }
        })
    }, []);

    return (
        <div className='home' >
            <h1>home</h1>
            <Button onClick={() => setTest(test + 1)}>{test}</Button>
            <Button onClick={() => setCount(count + 1)}>{count}count</Button>
            <div>{count}</div>
            <InputView></InputView>
            <KmView></KmView>
            <MView></MView>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
            <div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div><div>3233333333333333333333</div>
        </div>
    )
}


// Home.injectRouteHooks = function () {
//     return {
//         beforeHook({ location }, next) {
//             let { setTest, setCount } = routeHandler
//             setTest && setTest((test) => test * 2)
//             setCount && setCount((count) => count * 2)
//             next()
//         }
//     }
// }




function InputView() {
    let [, setLong] = useRgLong()
    return (
        <Input style={{ width: 300 }} onChange={(e) => {
            let value = e.currentTarget.value * 1
            console.log(value)
            setLong(value)
        }}></Input>
    )
}

function KmView() {
    let [long] = useRgLong(1)
    return (
        <h1>{long * .001}KM</h1>
    )
}
function MView() {
    let [long] = useRgLong(() => 100)
    return (
        <h1>{long}M</h1>
    )
}